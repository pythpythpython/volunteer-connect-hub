---
layout: default
title: My Schedule - VolunteerConnect Hub
description: View and manage your volunteer schedule
---

<div class="section">
    <div class="section-header">
        <h1 class="section-title">My Volunteer Schedule</h1>
        <p class="section-subtitle">Track your commitments and never miss a volunteer session</p>
    </div>
    
    <!-- Auth Required Notice -->
    <div id="authRequired" class="card" style="text-align: center; padding: 48px;">
        <span class="material-icons" style="font-size: 64px; color: var(--primary); margin-bottom: 16px;">calendar_month</span>
        <h2 style="margin-bottom: 16px;">Sign In to View Your Schedule</h2>
        <p style="color: var(--gray-600); margin-bottom: 24px;">
            Track your volunteer commitments, get reminders, and sync with your calendar.
        </p>
        <button class="btn btn-primary btn-lg" onclick="signInWithGoogle()">
            <span class="material-icons">login</span>
            Sign In
        </button>
    </div>
    
    <!-- Schedule Content (shown when authenticated) -->
    <div id="scheduleContent" class="hidden">
        <!-- Actions Bar -->
        <div class="flex justify-between items-center" style="margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
            <div class="flex gap-4">
                <button class="btn btn-primary" onclick="openAddEventModal()">
                    <span class="material-icons">add</span>
                    Add Event
                </button>
                <button class="btn btn-outline" onclick="exportToCalendar()">
                    <span class="material-icons">download</span>
                    Export to iCal
                </button>
            </div>
            <div class="flex gap-4">
                <button class="btn btn-text" onclick="changeView('week')">Week</button>
                <button class="btn btn-text" onclick="changeView('month')">Month</button>
                <button class="btn btn-text" onclick="changeView('list')">List</button>
            </div>
        </div>
        
        <!-- Calendar View -->
        <div class="card">
            <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                <button class="btn btn-icon" onclick="previousPeriod()">
                    <span class="material-icons">chevron_left</span>
                </button>
                <h2 class="card-title" id="currentPeriod">December 2024</h2>
                <button class="btn btn-icon" onclick="nextPeriod()">
                    <span class="material-icons">chevron_right</span>
                </button>
            </div>
            <div class="card-body">
                <!-- Calendar Grid -->
                <div id="calendarView">
                    <div class="calendar-grid">
                        <div class="calendar-header">Sun</div>
                        <div class="calendar-header">Mon</div>
                        <div class="calendar-header">Tue</div>
                        <div class="calendar-header">Wed</div>
                        <div class="calendar-header">Thu</div>
                        <div class="calendar-header">Fri</div>
                        <div class="calendar-header">Sat</div>
                        <!-- Calendar days will be generated by JavaScript -->
                    </div>
                    
                    <div id="calendarDays" class="calendar-days">
                        <!-- Days populated by JS -->
                    </div>
                </div>
                
                <!-- Empty State -->
                <div id="emptySchedule" class="hidden" style="text-align: center; padding: 32px;">
                    <span class="material-icons" style="font-size: 48px; color: var(--gray-400);">event_available</span>
                    <h3 style="margin: 16px 0 8px;">No Events Scheduled</h3>
                    <p style="color: var(--gray-600);">Add your first volunteer event to get started.</p>
                </div>
            </div>
        </div>
        
        <!-- Upcoming Events List -->
        <div class="card" style="margin-top: 24px;">
            <div class="card-header">
                <h3 class="card-title">Upcoming Events</h3>
            </div>
            <div class="card-body" id="upcomingEvents">
                <p style="color: var(--gray-500); text-align: center;">
                    Your upcoming volunteer events will appear here.
                </p>
            </div>
        </div>
        
        <!-- Reminders Info -->
        <div class="alert alert-info" style="margin-top: 24px;">
            <span class="material-icons">notifications</span>
            <div>
                <strong>Get Reminders</strong>
                <p style="margin: 0;">Enable notifications to receive reminders before your volunteer sessions.</p>
                <button class="btn btn-text" style="margin-top: 8px;" onclick="enableNotifications()">
                    Enable Notifications
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Add Event Modal -->
<div class="modal-overlay" id="addEventModal">
    <div class="modal" style="max-width: 500px;">
        <div class="modal-header">
            <h2 class="modal-title">Add Volunteer Event</h2>
            <button class="modal-close" onclick="closeModal('addEventModal')">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="modal-body">
            <form id="addEventForm">
                <div class="form-group">
                    <label class="form-label" for="eventTitle">Event Title *</label>
                    <input type="text" class="form-input" id="eventTitle" required 
                           placeholder="e.g., Food Bank Volunteer Shift">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="eventOrg">Organization</label>
                    <input type="text" class="form-input" id="eventOrg" 
                           placeholder="e.g., Local Food Bank">
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div class="form-group">
                        <label class="form-label" for="eventDate">Date *</label>
                        <input type="date" class="form-input" id="eventDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="eventTime">Start Time *</label>
                        <input type="time" class="form-input" id="eventTime" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="eventDuration">Duration (hours)</label>
                    <input type="number" class="form-input" id="eventDuration" 
                           min="0.5" max="12" step="0.5" value="2">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="eventLocation">Location</label>
                    <input type="text" class="form-input" id="eventLocation" 
                           placeholder="Address or 'Virtual'">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="eventNotes">Notes</label>
                    <textarea class="form-input form-textarea" id="eventNotes" 
                              placeholder="Any additional details..."></textarea>
                </div>
                
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="eventReminder" checked>
                        <span>Send me a reminder 24 hours before</span>
                    </label>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal('addEventModal')">Cancel</button>
            <button class="btn btn-primary" onclick="saveEvent()">
                <span class="material-icons">save</span>
                Save Event
            </button>
        </div>
    </div>
</div>

<style>
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    background: var(--gray-200);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.calendar-header {
    background: var(--gray-100);
    padding: 12px;
    text-align: center;
    font-weight: 600;
    color: var(--gray-600);
    font-size: 14px;
}

.calendar-days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    background: var(--gray-200);
}

.calendar-day {
    background: var(--white);
    min-height: 80px;
    padding: 8px;
    cursor: pointer;
    transition: background var(--transition-fast);
}

.calendar-day:hover {
    background: var(--gray-50);
}

.calendar-day.other-month {
    color: var(--gray-400);
    background: var(--gray-50);
}

.calendar-day.today {
    background: rgba(79, 70, 229, 0.1);
}

.calendar-day .day-number {
    font-weight: 500;
    margin-bottom: 4px;
}

.calendar-day .day-event {
    font-size: 11px;
    padding: 2px 4px;
    background: var(--primary);
    color: white;
    border-radius: 2px;
    margin-top: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
</style>

<script>
let currentDate = new Date();
let events = [];

// Load events from localStorage
function loadEvents() {
    const saved = localStorage.getItem('volunteerEvents');
    if (saved) {
        events = JSON.parse(saved);
    }
    renderCalendar();
    renderUpcoming();
}

function saveEvents() {
    localStorage.setItem('volunteerEvents', JSON.stringify(events));
}

function renderCalendar() {
    const container = document.getElementById('calendarDays');
    if (!container) return;
    
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    
    document.getElementById('currentPeriod').textContent = 
        currentDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
    
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const startDay = firstDay.getDay();
    const totalDays = lastDay.getDate();
    
    let html = '';
    
    // Previous month days
    const prevMonth = new Date(year, month, 0);
    for (let i = startDay - 1; i >= 0; i--) {
        const day = prevMonth.getDate() - i;
        html += `<div class="calendar-day other-month"><span class="day-number">${day}</span></div>`;
    }
    
    // Current month days
    const today = new Date();
    for (let day = 1; day <= totalDays; day++) {
        const isToday = year === today.getFullYear() && month === today.getMonth() && day === today.getDate();
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const dayEvents = events.filter(e => e.date === dateStr);
        
        html += `<div class="calendar-day ${isToday ? 'today' : ''}" onclick="selectDate('${dateStr}')">
            <span class="day-number">${day}</span>
            ${dayEvents.map(e => `<div class="day-event">${e.title}</div>`).join('')}
        </div>`;
    }
    
    // Next month days
    const remaining = 42 - (startDay + totalDays);
    for (let day = 1; day <= remaining; day++) {
        html += `<div class="calendar-day other-month"><span class="day-number">${day}</span></div>`;
    }
    
    container.innerHTML = html;
}

function renderUpcoming() {
    const container = document.getElementById('upcomingEvents');
    if (!container) return;
    
    const today = new Date().toISOString().split('T')[0];
    const upcoming = events.filter(e => e.date >= today).sort((a, b) => a.date.localeCompare(b.date));
    
    if (upcoming.length === 0) {
        container.innerHTML = `<p style="color: var(--gray-500); text-align: center;">
            No upcoming events. Add your first volunteer commitment!
        </p>`;
        return;
    }
    
    container.innerHTML = upcoming.slice(0, 5).map(event => `
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--gray-200);">
            <div>
                <strong>${event.title}</strong>
                <p style="color: var(--gray-600); font-size: 14px; margin: 0;">
                    ${new Date(event.date + 'T' + event.time).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}
                    at ${event.time}
                    ${event.organization ? 'â€¢ ' + event.organization : ''}
                </p>
            </div>
            <button class="btn btn-icon" onclick="deleteEvent('${event.id}')">
                <span class="material-icons">delete</span>
            </button>
        </div>
    `).join('');
}

function openAddEventModal() {
    document.getElementById('addEventModal').classList.add('active');
    document.body.style.overflow = 'hidden';
    
    // Set default date to today
    document.getElementById('eventDate').value = new Date().toISOString().split('T')[0];
}

function closeModal(modalId) {
    document.getElementById(modalId).classList.remove('active');
    document.body.style.overflow = '';
}

function saveEvent() {
    const title = document.getElementById('eventTitle').value;
    const date = document.getElementById('eventDate').value;
    const time = document.getElementById('eventTime').value;
    
    if (!title || !date || !time) {
        alert('Please fill in required fields');
        return;
    }
    
    const event = {
        id: Date.now().toString(),
        title: title,
        organization: document.getElementById('eventOrg').value,
        date: date,
        time: time,
        duration: parseFloat(document.getElementById('eventDuration').value) || 2,
        location: document.getElementById('eventLocation').value,
        notes: document.getElementById('eventNotes').value,
        reminder: document.getElementById('eventReminder').checked
    };
    
    events.push(event);
    saveEvents();
    renderCalendar();
    renderUpcoming();
    closeModal('addEventModal');
    
    // Reset form
    document.getElementById('addEventForm').reset();
    
    // Show confirmation
    alert('Event added successfully!');
}

function deleteEvent(id) {
    if (confirm('Delete this event?')) {
        events = events.filter(e => e.id !== id);
        saveEvents();
        renderCalendar();
        renderUpcoming();
    }
}

function selectDate(dateStr) {
    document.getElementById('eventDate').value = dateStr;
    openAddEventModal();
}

function previousPeriod() {
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar();
}

function nextPeriod() {
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar();
}

function exportToCalendar() {
    if (events.length === 0) {
        alert('No events to export');
        return;
    }
    
    let ics = 'BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//VolunteerConnect//EN\n';
    
    events.forEach(event => {
        const start = new Date(event.date + 'T' + event.time);
        const end = new Date(start.getTime() + event.duration * 60 * 60 * 1000);
        
        ics += 'BEGIN:VEVENT\n';
        ics += `UID:${event.id}@volunteerconnect\n`;
        ics += `DTSTART:${formatICSDate(start)}\n`;
        ics += `DTEND:${formatICSDate(end)}\n`;
        ics += `SUMMARY:${event.title}\n`;
        if (event.location) ics += `LOCATION:${event.location}\n`;
        if (event.notes) ics += `DESCRIPTION:${event.notes}\n`;
        ics += 'END:VEVENT\n';
    });
    
    ics += 'END:VCALENDAR';
    
    const blob = new Blob([ics], { type: 'text/calendar' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'volunteer-schedule.ics';
    a.click();
    URL.revokeObjectURL(url);
}

function formatICSDate(date) {
    return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
}

function enableNotifications() {
    if ('Notification' in window) {
        Notification.requestPermission().then(permission => {
            if (permission === 'granted') {
                alert('Notifications enabled! You will receive reminders for your volunteer events.');
            }
        });
    } else {
        alert('Notifications are not supported in this browser.');
    }
}

function changeView(view) {
    // For now just show feedback
    console.log('View:', view);
}

// Auth state handling
window.addEventListener('userSignedIn', function() {
    document.getElementById('authRequired').classList.add('hidden');
    document.getElementById('scheduleContent').classList.remove('hidden');
    loadEvents();
});

window.addEventListener('userSignedOut', function() {
    document.getElementById('authRequired').classList.remove('hidden');
    document.getElementById('scheduleContent').classList.add('hidden');
});

document.addEventListener('DOMContentLoaded', function() {
    if (isAuthenticated()) {
        document.getElementById('authRequired').classList.add('hidden');
        document.getElementById('scheduleContent').classList.remove('hidden');
        loadEvents();
    }
});
</script>
